import{a as h,B as b,c as p,f as u,D as n,E as s,ab as w,aZ as x,e as B,au as E,i as C,o as _}from"./index-Dz41ggC7.js";import{a as y,b as U}from"./el-table-column-CpKAGHtK.js";import{g as k,r as v,p as T}from"./request-CZdwYwKb.js";import{E as V}from"./index-CkMOv522.js";import{E as g}from"./index-DmBNINOK.js";import"./isEqual-BZuE2YcZ.js";import"./index-DHOeTWXz.js";const D={class:"banner-table",style:{"margin-top":"15px"}},N=["src"],q=h({__name:"ListView",setup(L){const m=b([]),f=(i,o)=>{let{id:t,imgUrl:l,title:a}=o;console.log({id:t,imgUrl:l,title:a}),V.confirm(`是否删除这个“${a}”的轮播图?`,"警告",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(async()=>{console.log("1"),await v({id:t}).then(e=>{let{code:r,msg:c}=e;r!=200&&g.error(c)}),d(),await T({picUrl:l}).then(e=>{let{code:r,msg:c}=e;r!=200&&g.error(c)}).catch(e=>{console.log(e)})}).catch(e=>{})},d=async()=>{await k().then(i=>{let{code:o,result:t}=i;if(o==200){let l=t.map((a,e)=>(a.index=e+1,a.imgUrl=x.url+a.imgUrl,a));m.value=l}})};return d(),(i,o)=>{const t=U,l=E,a=y;return _(),p(w,null,[o[1]||(o[1]=u("h3",null,"轮播图列表",-1)),u("div",D,[n(a,{data:m.value,stripe:"",style:{width:"100%"}},{default:s(()=>[n(t,{prop:"index",label:"序号",width:"200"}),n(t,{prop:"title",label:"广告标题",width:"380"}),n(t,{label:"图片",width:"400"},{default:s(e=>[e.row.imgUrl?(_(),p("img",{key:0,style:{width:"200px"},src:e.row.imgUrl},null,8,N)):B("",!0)]),_:1}),n(t,{label:"操作"},{default:s(e=>[n(l,{size:"small",type:"danger",onClick:r=>f(e.$index,e.row)},{default:s(()=>o[0]||(o[0]=[C(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])],64)}}});export{q as default};
